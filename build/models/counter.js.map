{"version":3,"file":"counter.js","names":["Schema","mongoose","counterSchema","sequence_counter","type","Number","required","statics","getNextSequenceValue","sequenceName","Counter","findOneAndUpdate","_id","id","$inc","returnOriginal","sequenceDocument","value","model"],"sources":["../../src/models/counter.js"],"sourcesContent":["import mongoose from \"mongoose\";\nconst {Schema} = mongoose;\n\nconst counterSchema = new Schema({\n\tsequence_counter: {type: Number, required: true},\n});\n\n// https://velog.io/@gytlr01/mongodb-%EC%9E%90%EB%8F%99-%EB%B2%88%ED%98%B8-%EC%A6%9D%EA%B0%80-%EA%B5%AC%ED%98%84\ncounterSchema.statics.getNextSequenceValue = async (sequenceName) => {\n\tconst sequenceDocument = await Counter.findOneAndUpdate(\n\t\t{_id: id},\n\t\t{$inc: {sequence_counter: 1}},\n\t\t{returnOriginal: false}\n\t);\n\n\treturn sequenceDocument.value.sequence_counter;\n};\n\nexport const Counter = mongoose.model(\"Counter\", counterSchema);\n"],"mappings":";;;;;;;;;AAAA;;;;+CACA,oJ;;;;;;AAAA,IAAOA,MAAP,GAAiBC,oBAAjB,CAAOD,MAAP;AAEA,IAAME,aAAa,GAAG,IAAIF,MAAJ,CAAW;EAChCG,gBAAgB,EAAE;IAACC,IAAI,EAAEC,MAAP;IAAeC,QAAQ,EAAE;EAAzB;AADc,CAAX,CAAtB,C,CAIA;;AACAJ,aAAa,CAACK,OAAd,CAAsBC,oBAAtB;EAAA,sEAA6C,iBAAOC,YAAP;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACbC,OAAO,CAACC,gBAAR,CAC9B;cAACC,GAAG,EAAEC;YAAN,CAD8B,EAE9B;cAACC,IAAI,EAAE;gBAACX,gBAAgB,EAAE;cAAnB;YAAP,CAF8B,EAG9B;cAACY,cAAc,EAAE;YAAjB,CAH8B,CADa;;UAAA;YACtCC,gBADsC;YAAA,iCAOrCA,gBAAgB,CAACC,KAAjB,CAAuBd,gBAPc;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAA7C;;EAAA;IAAA;EAAA;AAAA;;AAUO,IAAMO,OAAO,GAAGT,oBAAA,CAASiB,KAAT,CAAe,SAAf,EAA0BhB,aAA1B,CAAhB"}