{"version":3,"file":"compliment.js","names":["Schema","mongoose","complitmentSchema","task","type","String","required","author","doneAt","Number","Date","getTime","createdAt","updatedAt","values","message","timestamps","statics","create","payload","Compliment","compliment","save","findByTaskIds","taskIds","find","$in","result","map","forEach","taskId","item","push","findByTaskId","deleteByComplimentId","complimentId","findByIdAndDelete","models","model"],"sources":["../../src/models/compliment.js"],"sourcesContent":["import mongoose from \"mongoose\";\nconst {Schema} = mongoose;\n\nconst complitmentSchema = new Schema(\n\t{\n\t\ttask: {type: String, required: true},\n\t\tauthor: {type: String, required: true},\n\t\tdoneAt: {type: Number, default: new Date().getTime()},\n\t\tcreatedAt: {type: Number, default: new Date().getTime()},\n\t\tupdatedAt: {type: Number, default: new Date().getTime()},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tenum: {\n\t\t\t\tvalues: [\"party-popper\", \"thumbs-up\", \"clapping-hands\", \"red-heart\"],\n\t\t\t\tmessage: `{VALUE} is not matched with compliment type!`,\n\t\t\t},\n\t\t\trequired: true,\n\t\t},\n\t},\n\t{timestamps: true}\n);\n\n// POST: (task, author, type) goal데이터를 보내면 저장한다\ncomplitmentSchema.statics.create = async (payload) => {\n\tconst compliment = await new Compliment(payload);\n\treturn compliment.save();\n};\n\n// GET: taskIds주면 해당되는거 가져오기\ncomplitmentSchema.statics.findByTaskIds = async (taskIds) => {\n\tconst result = await Compliment.find({task: {$in: taskIds}});\n\tconst map = {};\n\n\ttaskIds.forEach((taskId) => {\n\t\tmap[taskId] = [];\n\t});\n\n\tresult.forEach((item) => {\n\t\tmap[item.task] && map[item.task].push(item);\n\t});\n\n\treturn map;\n};\n\ncomplitmentSchema.statics.findByTaskId = async (taskId) => {\n\treturn await Compliment.find({task: taskId});\n};\n\n// DELETE: complimentId를 삭제\ncomplitmentSchema.statics.deleteByComplimentId = async (complimentId) => {\n\treturn await Compliment.findByIdAndDelete(complimentId);\n};\n\nexport const Compliment =\n\tmongoose.models.Compliment || mongoose.model(\"Compliment\", complitmentSchema);\n"],"mappings":"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"}