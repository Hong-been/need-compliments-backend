{"version":3,"file":"goal.js","names":["Schema","mongoose","goalSchema","name","type","String","required","color","author","createdAt","Number","Date","getTime","updatedAt","readPermission","values","readPermissionTypes","message","timestamps","statics","create","payload","Goal","goal","save","findByUserId","find","findByGoalIds","goalIds","_id","$in","findByGoalId","goalId","findById","patchByGoalId","findByIdAndUpdate","deleteByGoalId","findByIdAndDelete","model"],"sources":["../../src/models/goal.js"],"sourcesContent":["import mongoose from \"mongoose\";\nimport {readPermissionTypes} from \"utils/types\";\nconst {Schema} = mongoose;\n\nconst goalSchema = new Schema(\n\t{\n\t\tname: {type: String, required: true},\n\t\tcolor: {type: String, required: true},\n\t\tauthor: {type: String, required: true},\n\t\tcreatedAt: {type: Number, default: new Date().getTime()},\n\t\tupdatedAt: {type: Number, default: new Date().getTime()},\n\t\treadPermission: {\n\t\t\ttype: String,\n\t\t\tenum: {\n\t\t\t\tvalues: readPermissionTypes,\n\t\t\t\tmessage: `{VALUE} is not matched with readPermission!`,\n\t\t\t},\n\t\t\trequired: true,\n\t\t},\n\t},\n\t{timestamps: true}\n);\n\n// POST: (author, name ,color, readPermission) goal데이터를 보내면 저장한다\ngoalSchema.statics.create = async (payload) => {\n\tconst goal = await new Goal(payload);\n\treturn goal.save();\n};\n\n// GET: author를 주면 모든 goal 가져오기\ngoalSchema.statics.findByUserId = async (author) => {\n\treturn await Goal.find({author});\n};\n\n// GET: goalIds주면 해당goals 가져오기\ngoalSchema.statics.findByGoalIds = async (goalIds) => {\n\treturn await Goal.find({_id: {$in: goalIds}});\n};\n\ngoalSchema.statics.findByGoalId = async (goalId) => {\n\treturn await Goal.findById(goalId);\n};\n\n// PATCH: goalId를 주면 goal로 업데이트 진행\ngoalSchema.statics.patchByGoalId = async (goalId, goal) => {\n\treturn await Goal.findByIdAndUpdate(\n\t\tgoalId,\n\t\t{\n\t\t\tname: goal.name && goal.name,\n\t\t\tcolor: goal.color && goal.color,\n\t\t\treadPermission: goal.readPermission && goal.readPermission,\n\t\t\tupdatedAt: new Date().getTime(),\n\t\t},\n\t\t{new: true}\n\t);\n};\n\n// DELETE: goalId를 삭제\ngoalSchema.statics.deleteByGoalId = async (goalId) => {\n\treturn await Goal.findByIdAndDelete(goalId);\n};\n\nexport const Goal = mongoose.model(\"Goal\", goalSchema);\n"],"mappings":"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"}